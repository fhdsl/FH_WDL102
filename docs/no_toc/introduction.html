<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Introduction | WDL102: Designing, Testing and Optimizing Workflows</title>
  <meta name="description" content="A getting started guide to designing and testing WDL workflows" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Introduction | WDL102: Designing, Testing and Optimizing Workflows" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A getting started guide to designing and testing WDL workflows" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Introduction | WDL102: Designing, Testing and Optimizing Workflows" />
  
  <meta name="twitter:description" content="A getting started guide to designing and testing WDL workflows" />
  



<meta name="date" content="2022-12-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="index.html"/>
<link rel="next" href="designing-wdls.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://hutchdatascience.org/" target="_blank"><img src="assets/big-dasl-stacked.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Guide</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-wdl"><i class="fa fa-check"></i><b>1.1</b> What is WDL?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#openwdl"><i class="fa fa-check"></i><b>1.1.1</b> OpenWDL</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#documentation-about-the-wdl-spec"><i class="fa fa-check"></i><b>1.1.2</b> Documentation about the WDL Spec</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#tools-to-edit-wdl"><i class="fa fa-check"></i><b>1.1.3</b> Tools to Edit WDL</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-is-a-wdl-engine"><i class="fa fa-check"></i><b>1.2</b> What Is a WDL Engine?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#why-use-wdl-for-my-research"><i class="fa fa-check"></i><b>1.3</b> Why use WDL for my research?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#abstracting-storage-and-computing-details"><i class="fa fa-check"></i><b>1.3.1</b> Abstracting Storage and Computing Details</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#reproducibility-and-portability"><i class="fa fa-check"></i><b>1.3.2</b> Reproducibility and Portability</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#software-and-environments"><i class="fa fa-check"></i><b>1.3.3</b> Software and Environments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="designing-wdls.html"><a href="designing-wdls.html"><i class="fa fa-check"></i><b>2</b> Designing WDLs</a>
<ul>
<li class="chapter" data-level="2.1" data-path="designing-wdls.html"><a href="designing-wdls.html#writing-workflows"><i class="fa fa-check"></i><b>2.1</b> Writing Workflows</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="designing-wdls.html"><a href="designing-wdls.html#design-recommendations"><i class="fa fa-check"></i><b>2.1.1</b> Design Recommendations</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="designing-wdls.html"><a href="designing-wdls.html#customizing-workflow-runs"><i class="fa fa-check"></i><b>2.2</b> Customizing Workflow Runs</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="designing-wdls.html"><a href="designing-wdls.html#workflow-options"><i class="fa fa-check"></i><b>2.2.1</b> Workflow Options</a></li>
<li class="chapter" data-level="2.2.2" data-path="designing-wdls.html"><a href="designing-wdls.html#runtime-defaults"><i class="fa fa-check"></i><b>2.2.2</b> Runtime Defaults</a></li>
<li class="chapter" data-level="2.2.3" data-path="designing-wdls.html"><a href="designing-wdls.html#call-caching"><i class="fa fa-check"></i><b>2.2.3</b> Call Caching</a></li>
<li class="chapter" data-level="2.2.4" data-path="designing-wdls.html"><a href="designing-wdls.html#workflow-failure-mode"><i class="fa fa-check"></i><b>2.2.4</b> Workflow Failure Mode</a></li>
<li class="chapter" data-level="2.2.5" data-path="designing-wdls.html"><a href="designing-wdls.html#copying-outputs"><i class="fa fa-check"></i><b>2.2.5</b> Copying outputs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html"><i class="fa fa-check"></i><b>3</b> Developing, Testing and Scaling Workflows</a>
<ul>
<li class="chapter" data-level="3.1" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#creating-an-inputs-template"><i class="fa fa-check"></i><b>3.1</b> Creating an Inputs template</a></li>
<li class="chapter" data-level="3.2" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#approaches-to-testing-and-development"><i class="fa fa-check"></i><b>3.2</b> Approaches to Testing and Development</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#start-from-a-template"><i class="fa fa-check"></i><b>3.2.1</b> Start from a template</a></li>
<li class="chapter" data-level="3.2.2" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#chose-software-modules"><i class="fa fa-check"></i><b>3.2.2</b> Chose Software Modules</a></li>
<li class="chapter" data-level="3.2.3" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#add-tasks"><i class="fa fa-check"></i><b>3.2.3</b> Add Tasks</a></li>
<li class="chapter" data-level="3.2.4" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#scale-up-inputs"><i class="fa fa-check"></i><b>3.2.4</b> Scale Up Inputs</a></li>
<li class="chapter" data-level="3.2.5" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#prep-for-other-platforms-and-sharing"><i class="fa fa-check"></i><b>3.2.5</b> Prep for Other Platforms and Sharing</a></li>
<li class="chapter" data-level="3.2.6" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#testing-input-availability"><i class="fa fa-check"></i><b>3.2.6</b> Testing Input Availability</a></li>
<li class="chapter" data-level="3.2.7" data-path="developing-testing-and-scaling-workflows.html"><a href="developing-testing-and-scaling-workflows.html#scaling-up-moving-to-the-cloud"><i class="fa fa-check"></i><b>3.2.7</b> Scaling Up, Moving to the Cloud</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="wdl-at-fred-hutch.html"><a href="wdl-at-fred-hutch.html"><i class="fa fa-check"></i><b>4</b> WDL at Fred Hutch</a></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="http://hutchdatascience.org/"> The Fred Hutch Data Science Lab </a></p>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">WDL102: Designing, Testing and Optimizing Workflows</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/dasl_thin_main_image.png">
</div>
<div id="introduction" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Introduction</h1>
<p>This guide is an introduction to designing and testing WDL workflows for beginner and intermediate users who primarily develop and run their own workflows for their own research work.</p>
<div id="what-is-wdl" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> What is WDL?</h2>
<p>The Workflow Description Language (WDL) is a way to specify data processing workflows with a human-readable and -writeable syntax. WDL makes it straightforward to define analysis tasks, chain them together in workflows, and parallelize their execution.</p>
<p>The language makes common patterns simple to express, while also admitting uncommon or complicated behavior; and strives to achieve portability not only across execution platforms, but also different types of users. Whether one is an analyst, a programmer, an operator of a production system, or any other sort of user, WDL should be accessible and understandable.</p>
<div id="openwdl" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> OpenWDL</h3>
<p>WDL was originally developed for genome analysis pipelines by the Broad Institute. As its community grew, both end users as well as other organizations using WDL for their own software, it became clear that there was a need to allow WDL to become a true community driven standard. The OpenWDL community has thus been formed to steward the WDL language specification and advocate its adoption.</p>
<p>There is ongoing work on WDL the specification, thus it has multiple versions. Currently there are three versions to note:
- draft-2 - this version was the version that much of the Broad’s public facing documentation and example workflows were written in.
- 1.0 - this is a more recent version that is the most up to date version of the specification that Cromwell can interpret. We use WDL 1.0 at the Hutch when we use Cromwell.
- 1.1 - this is an even more recent version that not all WDL engines support yet.</p>
<p>We’ll be using WDL 1.0 in this course but you can always check out the <a href="https://github.com/openwdl/wdl">openwdl repo</a> for more information about tweaking these instructions for different versions of WDL.</p>
</div>
<div id="documentation-about-the-wdl-spec" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Documentation about the WDL Spec</h3>
<p>To begin learning how to write WDL itself, the best (and evolving) resource is the <a href="https://wdl-docs.readthedocs.io/en/stable/">WDL-Docs</a> site being developed by the OpenWDL community. There you’ll find examples and guidance about the 1.0 WDL specification and using it to write workflows.</p>
</div>
<div id="tools-to-edit-wdl" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Tools to Edit WDL</h3>
<p><a href="https://code.visualstudio.com/">VSCode</a> has multiple extensions for WDL, including “WDL DevTools” and “WDL Syntax Highlighter” which can be very helpful for color-coding content and detecting issues while you’re writing, before workflow validation.</p>
</div>
</div>
<div id="what-is-a-wdl-engine" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> What Is a WDL Engine?</h2>
<p>A WDL engine is software that understands WDL and can interpret the instructions in order to execute the computational tasks involved in the workflow. An example of a WDL engine, one used at the Fred Hutch, is Cromwell. Cromwell is a software tool that can be used to coordinate and streamline the actual running of bioinformatic (or other analytic) workflows. It is the software that underlies the Broad Institute’s <a href="https://terra.bio/">Terra platform</a>. It’s one of several tools and platforms that are able to run workflows written in the WDL language, including <a href="https://miniwdl.readthedocs.io/en/latest/">miniWDL</a>from the Chan-Zuckerburg initiative, <a href="https://www.dnanexus.com/">DNANexus</a>, and other emerging tools.</p>
</div>
<div id="why-use-wdl-for-my-research" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Why use WDL for my research?</h2>
<div id="abstracting-storage-and-computing-details" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Abstracting Storage and Computing Details</h3>
<p>At many research institutions we have many resources for data storage, software installations and high performance computing available to researchers, which themselves are evolving. Using a workflow manager that is configured specifically to the types of data storages available at an institution can provide the benefits of “abstracting” or hiding some degree of the logistics involved with actually accessing those data for use in an analysis from the user.</p>
<p>For instance, beyond data storage in a local file system, researchers now may have the ability to store data in AWS S3 storage. Accessing those data for the purposes of using them in workflows requires slightly different knowledge and mechanisms of retrieval (e.g. knowledge of how to use the AWS CLI). By providing one configuration (or set of instructions for accessing data) for Cromwell that is tailored to what is available at the institution, any individual researcher can use Cromwell as an interface to their data, wherever they may be stored. This intermediate tool then reduces the amount of time and effort on the part of the researcher in understanding the data storage flavor of the day, allowing them to focus more on their data and their analyses.</p>
<p>An even more valuable benefit exists for high performance computing resources. When Cromwell is used as an intermediary, the backend configurations (or instructions for how to send jobs to HPC resources) can be defined once for all those resources currently available to Hutch users (such as our local SLURM cluster or AWS Batch for cloud computing). This means that individual users do not have to become SLURM or AWS Batch experts in order to be able to run jobs on them. They instead can focus on building their workflow and analyzing their results.</p>
</div>
<div id="reproducibility-and-portability" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Reproducibility and Portability</h3>
<p>Beyond the benefits of abstracting some of the institution-specific details from the analysis itself, this creates a convenient side effect. The lack of need to tailor a workflow itself to the unique combination of data storage and computing resources, means that researchers focus their time on developing workflows using the workflow language WDL. WDL is an open source workflow description language that one can use to describe the inputs, environments and outputs of individual tasks and how they are strung together for an analysis. By creating workflows using tasks with these features defined, it makes these workflows far more reproducible (e.g. running a given workflow on any compute infrastructure will create results that are identical), and far more portable. In academia where collaborations and career transitions mean potential loss of time spent tailoring analyses to various institutions’ infrastructure is the name of the game, this benefit holds substantial value.</p>
</div>
<div id="software-and-environments" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Software and Environments</h3>
<p>One challenge associated with reproducibility and portability that is something often undervalued in many bioinformatic analyses, is the management of computing software and environments. As projects evolve, they often begin in a testing phase with small datasets using readily available software or packages on a desktop computer or even potentially on a shared, remote computing resource. As they scale, it often is natural to simply do X, but Y times, all using the same computing environment of the user who originally developed the workflow.</p>
<p>While this is common, it also creates headaches later. Using a workflow manager like Cromwell as a tool for deploying your analyses also means that you can begin your work directly by developing a WDL and running the tests via Cromwell. As you develop your workflow and want to scale it to an entire analysis, you can simply edit your workflow and Cromwell will keep track of all the tasks and their interrelations.</p>
<p>While workflows are being developed in the context of a WDL for running with Cromwell (or other WDL runners that are being developed), each task must be defined to occur in a specific environment. That could be a user’s environment on the local SLURM cluster, or that could be a clean environment with specific software packages loaded, or it could be a docker or singularity container that directly specifies the software and environment in which to run the task.</p>

</div>
</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="designing-wdls.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
